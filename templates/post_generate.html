<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Caption Generator API Test</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
        
        .header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .header h1 {
            color: #405de6;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 1.1rem;
        }
        
        .section {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 25px;
        }
        
        .section-title {
            font-size: 1.4rem;
            color: #405de6;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        textarea, select, input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        textarea:focus, select:focus, input:focus {
            outline: none;
            border-color: #405de6;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .btn {
            background-color: #405de6;
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: #304ac3;
        }
        
        .btn:disabled {
            background-color: #a0a0a0;
            cursor: not-allowed;
        }
        
        .response-container {
            background-color: #f9f9ff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .caption-item {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #405de6;
        }
        
        .selected-caption {
            background-color: #f0f5ff;
            border-left: 4px solid #ff5a5f;
        }
        
        .caption-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .caption-number {
            background-color: #405de6;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .selected-badge {
            background-color: #ff5a5f;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .hashtags {
            margin-top: 20px;
        }
        
        .hashtag {
            display: inline-block;
            background-color: #e0e7ff;
            color: #405de6;
            padding: 5px 10px;
            border-radius: 20px;
            margin-right: 8px;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            font-size: 0.9rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #405de6;
        }
        
        .api-info {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #405de6;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .mock-api-toggle {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .toggle-label {
            margin-left: 10px;
            margin-bottom: 0;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #405de6;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Instagram Caption Generator API Test</h1>
            <p>Test the caption generation API with different parameters and see the response</p>
        </div>
        
        <div class="section">
            <h2 class="section-title">API Request</h2>
            
            <div class="mock-api-toggle">
                <div class="toggle-switch">
                    <input type="checkbox" id="mockToggle" checked>
                    <span class="slider"></span>
                </div>
                <label for="mockToggle" class="toggle-label">Use Mock API (Simulated Response)</label>
            </div>
            
            <div class="input-group">
                <label for="description">Product Description:</label>
                <textarea id="description">Premium lightweight wireless headphones designed for crystal-clear sound, deep bass, and all-day comfort. Perfect for work, travel, and workouts.</textarea>
            </div>
            
            <div class="input-group">
                <label for="platform">Platform:</label>
                <select id="platform">
                    <option value="instagram" selected>Instagram</option>
                    <option value="facebook">Facebook</option>
                    <option value="twitter">Twitter</option>
                    <option value="pinterest">Pinterest</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="tone">Tone:</label>
                <select id="tone">
                    <option value="persuasive" selected>Persuasive</option>
                    <option value="informative">Informative</option>
                    <option value="casual">Casual</option>
                    <option value="professional">Professional</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="topic">Topic:</label>
                <input type="text" id="topic" value="ecommerce">
            </div>
            
            <div class="input-group">
                <label for="callToAction">Call to Action:</label>
                <input type="text" id="callToAction" value="Shop now and upgrade your sound experience!">
            </div>
            
            <div class="input-group">
                <label for="imageDescription">Image Description:</label>
                <textarea id="imageDescription">Modern wireless headphones displayed on a clean background with soft lighting, highlighting sleek design and premium build quality</textarea>
            </div>
            
            <button id="submitBtn" class="btn">Generate Captions</button>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Generating captions...</p>
            </div>
            
            <div class="api-info">
                <strong>API Endpoint:</strong> https://test.frontliner.io/api/post/generate-caption/<br>
                <strong>Method:</strong> POST<br>
                <strong>Content-Type:</strong> application/json
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">API Response</h2>
            
            <div id="responseContainer" class="response-container">
                <p style="text-align: center; color: #888; padding: 30px;">
                    Submit a request to see the API response here.
                </p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const responseContainer = document.getElementById('responseContainer');
            const mockToggle = document.getElementById('mockToggle');
            
            // Mock API response based on the example provided
            const mockResponse = {
                "captions": [
                    "ðŸŽ§ Elevate your sound experience with our premium wireless headphones! Designed for all-day comfort and crystal-clear audio, they're your perfect companion for work, travel, and workouts. Don't settle for less! Shop now and upgrade your sound experience! ðŸŒŸ",
                    "Experience music like never before with our sleek and modern wireless headphones! ðŸ–¤ With deep bass and lightweight design, they're perfect for every lifestyle. Why wait? Shop now and upgrade your sound experience! ðŸŽ¶",
                    "Unleash the power of sound with our state-of-the-art wireless headphones! ðŸŽ¶ Whether you're at the gym or on a long flight, enjoy crystal-clear audio and ultimate comfort. Upgrade your listening game today! Shop now and upgrade your sound experience! ðŸš€"
                ],
                "selected_caption": "ðŸŽ§ Elevate your sound experience with our premium wireless headphones! Designed for all-day comfort and crystal-clear audio, they're your perfect companion for work, travel, and workouts. Don't settle for less! Shop now and upgrade your sound experience! ðŸŒŸ",
                "hashtags": [
                    "#WirelessHeadphones",
                    "#Ecommerce",
                    "#SoundExperience",
                    "#ShopNow",
                    "#UpgradeYourSound"
                ],
                "character_count": 331,
                "max_length": 2200,
                "within_limit": true
            };
            
            // Format the API request body
            function getRequestBody() {
                return {
                    description: document.getElementById('description').value,
                    platform: document.getElementById('platform').value,
                    tone: document.getElementById('tone').value,
                    topic: document.getElementById('topic').value,
                    call_to_action: document.getElementById('callToAction').value,
                    image_description: document.getElementById('imageDescription').value
                };
            }
            
            // Display the API response
            function displayResponse(response) {
                let html = '';
                
                // Display each caption
                response.captions.forEach((caption, index) => {
                    const isSelected = caption === response.selected_caption;
                    
                    html += `
                    <div class="caption-item ${isSelected ? 'selected-caption' : ''}">
                        <div class="caption-header">
                            <div class="caption-number">${index + 1}</div>
                            ${isSelected ? '<div class="selected-badge">SELECTED</div>' : ''}
                        </div>
                        <div class="caption-text">${caption}</div>
                    </div>
                    `;
                });
                
                // Display hashtags
                html += `<div class="hashtags">`;
                response.hashtags.forEach(hashtag => {
                    html += `<span class="hashtag">${hashtag}</span>`;
                });
                html += `</div>`;
                
                // Display stats
                html += `
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value">${response.character_count}</div>
                        <div>Characters</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${response.max_length}</div>
                        <div>Max Length</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${response.within_limit ? 'Yes' : 'No'}</div>
                        <div>Within Limit</div>
                    </div>
                </div>
                `;
                
                // Display raw JSON for reference
                html += `
                <div class="api-info" style="margin-top: 20px;">
                    <strong>Raw Response JSON:</strong><br>
                    <pre style="margin-top: 10px; overflow-x: auto; white-space: pre-wrap;">${JSON.stringify(response, null, 2)}</pre>
                </div>
                `;
                
                responseContainer.innerHTML = html;
            }
            
            // Simulate API call with delay
            function simulateApiCall(requestBody) {
                return new Promise((resolve) => {
                    // Add some randomness to the response for realism
                    const modifiedResponse = JSON.parse(JSON.stringify(mockResponse));
                    
                    // Modify captions slightly based on input parameters
                    if (requestBody.tone === "informative") {
                        modifiedResponse.captions[0] = modifiedResponse.captions[0].replace("Don't settle for less!", "Engineered for optimal audio performance.");
                    } else if (requestBody.tone === "casual") {
                        modifiedResponse.captions[1] = modifiedResponse.captions[1].replace("Why wait?", "Ready to rock?");
                    }
                    
                    // Modify hashtags based on platform
                    if (requestBody.platform === "twitter") {
                        modifiedResponse.hashtags.push("#TechTwitter");
                    } else if (requestBody.platform === "facebook") {
                        modifiedResponse.hashtags.push("#FacebookShop");
                    }
                    
                    // Simulate network delay
                    setTimeout(() => {
                        resolve(modifiedResponse);
                    }, 1500);
                });
            }
            
            // Make real API call (commented out since we don't have the actual endpoint)
            async function makeRealApiCall(requestBody) {
                try {
                    const response = await fetch('https://test.frontliner.io/api/post/generate-caption/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestBody)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`API responded with status: ${response.status}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error('API call failed:', error);
                    throw error;
                }
            }
            
            // Handle form submission
            submitBtn.addEventListener('click', async function() {
                // Show loading state
                submitBtn.disabled = true;
                loading.style.display = 'block';
                
                // Get request body
                const requestBody = getRequestBody();
                
                try {
                    let response;
                    
                    // Check if we're using mock API or real API
                    if (mockToggle.checked) {
                        // Use mock API
                        response = await simulateApiCall(requestBody);
                    } else {
                        // Use real API
                        // In a real implementation, you would uncomment this:
                        // response = await makeRealApiCall(requestBody);
                        
                        // For this demo, we'll fall back to mock
                        alert('Real API call is not implemented in this demo. Using mock API instead.');
                        response = await simulateApiCall(requestBody);
                    }
                    
                    // Display the response
                    displayResponse(response);
                } catch (error) {
                    responseContainer.innerHTML = `
                    <div style="text-align: center; color: #ff5a5f; padding: 30px;">
                        <h3>Error</h3>
                        <p>${error.message}</p>
                        <p>Please check your connection and try again.</p>
                    </div>
                    `;
                } finally {
                    // Hide loading state
                    submitBtn.disabled = false;
                    loading.style.display = 'none';
                }
            });
            
            // Display mock response initially for demonstration
            displayResponse(mockResponse);
        });
    </script>
</body>
</html>